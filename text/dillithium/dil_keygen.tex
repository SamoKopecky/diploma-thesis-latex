Dilithium key generation process starts by creating a random seed and then using this seed to create another three seeds $\rho$, $\rho'$, $K$. In listing \ref{lst:dil_keygen_1} $\rho$ is used to create the matrix \rmhat{A} and $\rho'$ for generating error vectors $s_1$, $s_2$. Variable $t$ is the product of \rmhat{A} and $s_1$ to which $s_2$ is added. $t$ is used as the argument for \texttt{power2Round} (refer to \ref{sec:dil_bit_man}) function together with $d$ which is a parameter defined \ref{tab:dil_sec_levels}. This functions splits $t$ into $t_1$ and $t_0$.
\newpage
\listing{text/code/dilithium.go}{Key generation}{lst:dil_keygen_1}{9}{15}

Variable $t_1$ is used as the public key together with the randomly generated $K$. The secret key consists of a hash of the public key, secret parameters $s_1$, $s_2$ and $t_0$. Polynomials vectors are additionally packed into bytes for easy transfer over the network as seen in listing \ref{lst:dil_keygen_2}. This process but simplified is also illustrated in figure \ref{img:dil_keygen}.
\listing{text/code/dilithium.go}{Key construction}{lst:dil_keygen_2}{17}{22}

\object[0.5]{obr}{pictures/dil_key_gen.pdf}{Dilithium key generation}{img:dil_keygen}